{"version":3,"sources":["classes.js","loader.js","Modal.js","assets/blank.jpg","App.js","reportWebVitals.js","index.js"],"names":["Album","id","name","images","this","thumb","length","img","visible","Photo","loadData","a","fetch","then","res","json","photosData","albumsData","albums","i","album","start","findIndex","elem","albumId","end","photos","j","photo","push","title","url","thumbnailUrl","slice","Modal","e","target","classList","contains","props","handler","className","onClick","clickEvent","src","alt","React","Component","App","header","grid","gridClass","selectedPhoto","state","bind","setState","load","showAlbums","page","buttons","label","backButton","backToAlbums","showPhotos","selectedAlbums","hideButtonText","updateHeader","filter","map","index","toPhotos","hideAlbum","selectedPhotos","selectPhoto","hidePhoto","newThumb","blank","console","log","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.87836a74.chunk.js","sourcesContent":["export class Album {\r\n  constructor(id, name, images) {\r\n    this.id = id;\r\n    this.name = name;\r\n    this.thumb = images[images.length - 1].img;\r\n    this.images = images;\r\n    this.visible = true;\r\n  }\r\n}\r\n\r\nexport class Photo {\r\n  constructor(id, name, img, thumb) {\r\n    this.id = id;\r\n    this.name = name;\r\n    this.img = img;\r\n    this.thumb = thumb;\r\n    this.visible = true;\r\n  }\r\n}\r\n","import { Album, Photo } from \"./classes\";\r\n\r\nexport default async function loadData() {\r\n  let albums = await fetch(\"https://jsonplaceholder.typicode.com/photos\")\r\n    .then((res) => res.json())\r\n    .then((photosData) =>\r\n      fetch(\"https://jsonplaceholder.typicode.com/albums\")\r\n        .then((res) => res.json())\r\n        .then((albumsData) => {\r\n          let albums = [];\r\n          for (let i = 0; i < albumsData.length; ++i) {\r\n            let album = albumsData[i];\r\n\r\n            let start = photosData.findIndex(\r\n              (elem) => elem.albumId === album.id\r\n            );\r\n\r\n            if (start === -1) continue;\r\n\r\n            let end = photosData.findIndex(\r\n              (elem) => elem.albumId === album.id + 1\r\n            );\r\n\r\n            if (end === -1) end = photosData.length;\r\n\r\n            let photos = [];\r\n            for (let j = start; j < end; ++j) {\r\n              let photo = photosData[j];\r\n              photos.push(\r\n                new Photo(photo.id, photo.title, photo.url, photo.thumbnailUrl)\r\n              );\r\n            }\r\n\r\n            albums.push(new Album(album.id, album.title, photos.slice()));\r\n          }\r\n          return albums;\r\n        })\r\n    );\r\n  return albums;\r\n}\r\n","import React from \"react\";\r\nimport \"./Modal.css\";\r\n\r\nclass Modal extends React.Component {\r\n  clickEvent(e) {\r\n    if (e.target.classList.contains(\"modal\")) {\r\n      this.props.handler({ photo: null });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let photo = this.props.photo;\r\n    if (photo !== null) {\r\n      return (\r\n        <div className=\"modal\" onClick={(e) => this.clickEvent(e)}>\r\n          <img src={photo.img} alt=\"\"></img>\r\n        </div>\r\n      );\r\n    } else return <></>;\r\n  }\r\n}\r\n\r\nexport default Modal;\r\n","export default __webpack_public_path__ + \"static/media/blank.f2d5803b.jpg\";","import loadData from \"./loader\";\nimport React from \"react\";\nimport Modal from \"./Modal.js\";\nimport \"./App.css\";\nimport blank from \"./assets/blank.jpg\";\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      grid: [],\n      selectedPhoto: null,\n    };\n\n    this.handler = this.handler.bind(this);\n  }\n\n  albums = [];\n  header = (<></>);\n  grid = [];\n  gridClass = \"grid-albums\";\n  selectedPhoto = null;\n\n  handler(photo) {\n    this.selectedPhoto = null;\n    this.setState({ selectedPhoto: photo });\n  }\n\n  componentDidMount() {\n    this.load();\n  }\n\n  async load() {\n    this.albums = await loadData();\n    this.showAlbums();\n  }\n\n  updateHeader(page, album = null) {\n    let buttons = null;\n    let label = \"\";\n    let backButton = <></>;\n    switch (page) {\n      case \"albums\":\n        label = \"Альбомы\";\n        buttons = (\n          <>\n            <div className=\"button\">Общие</div>\n            {this.albums.findIndex((album) => !album.visible) > -1 ? (\n              <div className=\"active-button\" onClick={() => this.showAlbums(false)}>\n                Скрытые\n              </div>\n            ) : (\n              <></>\n            )}\n          </>\n        );\n        break;\n\n      case \"hidden albums\":\n        label = \"Альбомы\";\n        buttons = (\n          <>\n            {this.albums.findIndex((album) => album.visible) > -1 ? (\n              <div className=\"active-button\" onClick={() => this.showAlbums(true)}>\n                Общие\n              </div>\n            ) : (\n              <></>\n            )}\n            <div className=\"button\">Скрытые</div>\n          </>\n        );\n        break;\n\n      case \"photos\":\n        label = album.name;\n\n        backButton = (\n          <div className=\"back-button\" onClick={() => this.backToAlbums()}>\n            <i className=\"left-arrow\"></i>К альбомам\n          </div>\n        );\n\n        buttons = (\n          <>\n            <div className=\"button\">Общие</div>\n            {album.images.findIndex((img) => !img.visible) > -1 ? (\n              <div className=\"active-button\" onClick={() => this.showPhotos(album, false)}>\n                Скрытые\n              </div>\n            ) : (\n              <></>\n            )}\n          </>\n        );\n        break;\n\n      case \"hidden photos\":\n        label = album.name;\n\n        backButton = (\n          <div className=\"back-button\" onClick={() => this.backToAlbums()}>\n            <i className=\"left-arrow\"></i>К альбомам\n          </div>\n        );\n\n        buttons = (\n          <>\n            {album.images.findIndex((img) => img.visible) > -1 ? (\n              <div className=\"active-button\" onClick={() => this.showPhotos(album, true)}>\n                Общие\n              </div>\n            ) : (\n              <></>\n            )}\n            <div className=\"button\">Скрытые</div>\n          </>\n        );\n        break;\n\n      default:\n        label = \"Ошибка\";\n        buttons = <div>Неверный тип страницы</div>;\n    }\n\n    this.header = (\n      <div className=\"header\">\n        {backButton}\n        <div className=\"label\">{label}</div>\n        <div className=\"header-buttons\">{buttons}</div>\n      </div>\n    );\n  }\n\n  showAlbums(visible = true) {\n    let selectedAlbums = [];\n    let hideButtonText = \"Скрыть\";\n    if (visible === true) {\n      this.updateHeader(\"albums\");\n      selectedAlbums = this.albums.filter((album) => album.visible);\n    } else {\n      this.updateHeader(\"hidden albums\");\n      selectedAlbums = this.albums.filter((album) => !album.visible);\n      hideButtonText = \"В общие\";\n    }\n\n    this.grid = selectedAlbums.map((album, index) => (\n      <div className=\"cell\" key={album.id}>\n        <img src={album.thumb} alt=\"\" onClick={() => this.toPhotos(album)}></img>\n        <div className=\"album-photos-quantity\">{album.images.length + \" фото\"}</div>\n        <div className=\"hide-button\" onClick={() => this.hideAlbum(album, visible)}>\n          {hideButtonText}\n        </div>\n        <div className=\"album-name\" onClick={() => this.toPhotos(album)}>\n          {album.name}\n        </div>\n      </div>\n    ));\n\n    this.gridClass = \"grid albums\";\n    this.setState({ grid: [...this.grid] });\n  }\n\n  showPhotos(album, visible = true) {\n    let selectedPhotos = [];\n    let hideButtonText = \"Скрыть\";\n    if (visible === true) {\n      this.updateHeader(\"photos\", album);\n      selectedPhotos = album.images.filter((img) => img.visible);\n    } else {\n      this.updateHeader(\"hidden photos\", album);\n      selectedPhotos = album.images.filter((img) => !img.visible);\n      hideButtonText = \"В общие\";\n    }\n\n    this.grid = selectedPhotos.map((photo, index) => (\n      <div className=\"cell\" key={photo.id}>\n        <img src={photo.thumb} alt=\"\" onClick={() => this.selectPhoto(photo)}></img>\n        <div className=\"hide-button\" onClick={() => this.hidePhoto(album, photo, visible)}>\n          {hideButtonText}\n        </div>\n        <div className=\"photo-name\">{photo.name}</div>\n      </div>\n    ));\n\n    this.gridClass = \"grid photos\";\n    this.setState({ grid: [...this.grid] });\n  }\n\n  hideAlbum(album, visible) {\n    album.visible = !visible;\n    if (this.albums.findIndex((album) => album.visible === visible) > -1) this.showAlbums(visible);\n    else this.showAlbums(!visible);\n  }\n\n  hidePhoto(album, photo, visible) {\n    photo.visible = !visible;\n    let newThumb = blank;\n    for (let i = album.images.length - 1; i >= 0; --i) {\n      console.log(i);\n      if (album.images[i].visible) {\n        newThumb = album.images[i].img;\n        break;\n      }\n    }\n    album.thumb = newThumb;\n\n    this.toPhotos(album, visible);\n  }\n\n  toPhotos(album, visible = true) {\n    if (album.images.findIndex((img) => img.visible === visible) > -1) this.showPhotos(album, visible);\n    else this.showPhotos(album, !visible);\n  }\n\n  backToAlbums() {\n    if (this.albums.findIndex((album) => album.visible) > -1) this.showAlbums(true);\n    else this.showAlbums(false);\n  }\n\n  selectPhoto(photo) {\n    this.selectedPhoto = photo;\n    this.setState({ selectedPhoto: photo });\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        {this.header}\n        <div className={this.gridClass}>{this.grid}</div>\n        <Modal handler={this.handler} photo={this.selectedPhoto} />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}