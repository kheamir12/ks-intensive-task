(this.webpackJsonpks_intensive_task=this.webpackJsonpks_intensive_task||[]).push([[0],{16:function(t,e,n){},18:function(t,e,n){},20:function(t,e,n){},21:function(t,e,n){"use strict";n.r(e);var i=n(1),s=n.n(i),c=n(11),a=n.n(c),r=(n(16),n(10)),o=n(3),l=n.n(o),u=n(4),h=n(2),d=n(5),b=n(6),m=n(8),j=n(7),f=function t(e,n,i){Object(h.a)(this,t),this.id=e,this.name=n,this.thumb=i[i.length-1].img,this.images=i,this.visible=!0},v=function t(e,n,i,s){Object(h.a)(this,t),this.id=e,this.name=n,this.img=i,this.thumb=s,this.visible=!0};function g(){return O.apply(this,arguments)}function O(){return(O=Object(u.a)(l.a.mark((function t(){var e;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://jsonplaceholder.typicode.com/photos").then((function(t){return t.json()})).then((function(t){return fetch("https://jsonplaceholder.typicode.com/albums").then((function(t){return t.json()})).then((function(e){for(var n=[],i=function(i){var s=e[i],c=t.findIndex((function(t){return t.albumId===s.id}));if(-1===c)return"continue";var a=t.findIndex((function(t){return t.albumId===s.id+1}));-1===a&&(a=t.length);for(var r=[],o=c;o<a;++o){var l=t[o];r.push(new v(l.id,l.title,l.url,l.thumbnailUrl))}n.push(new f(s.id,s.title,r.slice()))},s=0;s<e.length;++s)i(s);return n}))}));case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}n(18);var p=n(0),x=function(t){Object(m.a)(n,t);var e=Object(j.a)(n);function n(){return Object(h.a)(this,n),e.apply(this,arguments)}return Object(d.a)(n,[{key:"clickEvent",value:function(t){t.target.classList.contains("modal")&&this.props.handler({photo:null})}},{key:"render",value:function(){var t=this,e=this.props.photo;return null!==e?Object(p.jsx)("div",{className:"modal",onClick:function(e){return t.clickEvent(e)},children:Object(p.jsx)("img",{src:e.img,alt:""})}):Object(p.jsx)(p.Fragment,{})}}]),n}(s.a.Component),k=(n(20),n.p+"static/media/blank.f2d5803b.jpg"),N=function(t){Object(m.a)(n,t);var e=Object(j.a)(n);function n(t){var i;return Object(h.a)(this,n),(i=e.call(this,t)).albums=[],i.header=Object(p.jsx)(p.Fragment,{}),i.grid=[],i.gridClass="grid-albums",i.selectedPhoto=null,i.state={grid:[],selectedPhoto:null},i.handler=i.handler.bind(Object(b.a)(i)),i}return Object(d.a)(n,[{key:"handler",value:function(t){this.selectedPhoto=null,this.setState({selectedPhoto:t})}},{key:"componentDidMount",value:function(){this.load()}},{key:"load",value:function(){var t=Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g();case 2:this.albums=t.sent,this.showAlbums();case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"updateHeader",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=null,s="",c=Object(p.jsx)(p.Fragment,{});switch(t){case"albums":s="\u0410\u043b\u044c\u0431\u043e\u043c\u044b",i=Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"button",children:"\u041e\u0431\u0449\u0438\u0435"}),this.albums.findIndex((function(t){return!t.visible}))>-1?Object(p.jsx)("div",{className:"active-button",onClick:function(){return e.showAlbums(!1)},children:"\u0421\u043a\u0440\u044b\u0442\u044b\u0435"}):Object(p.jsx)(p.Fragment,{})]});break;case"hidden albums":s="\u0410\u043b\u044c\u0431\u043e\u043c\u044b",i=Object(p.jsxs)(p.Fragment,{children:[this.albums.findIndex((function(t){return t.visible}))>-1?Object(p.jsx)("div",{className:"active-button",onClick:function(){return e.showAlbums(!0)},children:"\u041e\u0431\u0449\u0438\u0435"}):Object(p.jsx)(p.Fragment,{}),Object(p.jsx)("div",{className:"button",children:"\u0421\u043a\u0440\u044b\u0442\u044b\u0435"})]});break;case"photos":s=n.name,c=Object(p.jsxs)("div",{className:"back-button",onClick:function(){return e.backToAlbums()},children:[Object(p.jsx)("i",{className:"left-arrow"}),"\u041a \u0430\u043b\u044c\u0431\u043e\u043c\u0430\u043c"]}),i=Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"button",children:"\u041e\u0431\u0449\u0438\u0435"}),n.images.findIndex((function(t){return!t.visible}))>-1?Object(p.jsx)("div",{className:"active-button",onClick:function(){return e.showPhotos(n,!1)},children:"\u0421\u043a\u0440\u044b\u0442\u044b\u0435"}):Object(p.jsx)(p.Fragment,{})]});break;case"hidden photos":s=n.name,c=Object(p.jsxs)("div",{className:"back-button",onClick:function(){return e.backToAlbums()},children:[Object(p.jsx)("i",{className:"left-arrow"}),"\u041a \u0430\u043b\u044c\u0431\u043e\u043c\u0430\u043c"]}),i=Object(p.jsxs)(p.Fragment,{children:[n.images.findIndex((function(t){return t.visible}))>-1?Object(p.jsx)("div",{className:"active-button",onClick:function(){return e.showPhotos(n,!0)},children:"\u041e\u0431\u0449\u0438\u0435"}):Object(p.jsx)(p.Fragment,{}),Object(p.jsx)("div",{className:"button",children:"\u0421\u043a\u0440\u044b\u0442\u044b\u0435"})]});break;default:s="\u041e\u0448\u0438\u0431\u043a\u0430",i=Object(p.jsx)("div",{children:"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0442\u0438\u043f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b"})}this.header=Object(p.jsxs)("div",{className:"header",children:[c,Object(p.jsx)("div",{className:"label",children:s}),Object(p.jsx)("div",{className:"header-buttons",children:i})]})}},{key:"showAlbums",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=[],i="\u0421\u043a\u0440\u044b\u0442\u044c";!0===e?(this.updateHeader("albums"),n=this.albums.filter((function(t){return t.visible}))):(this.updateHeader("hidden albums"),n=this.albums.filter((function(t){return!t.visible})),i="\u0412 \u043e\u0431\u0449\u0438\u0435"),this.grid=n.map((function(n,s){return Object(p.jsxs)("div",{className:"cell",children:[Object(p.jsx)("img",{src:n.thumb,alt:"",onClick:function(){return t.toPhotos(n)}}),Object(p.jsx)("div",{className:"album-photos-quantity",children:n.images.length+" \u0444\u043e\u0442\u043e"}),Object(p.jsx)("div",{className:"hide-button",onClick:function(){return t.hideAlbum(n,e)},children:i}),Object(p.jsx)("div",{className:"album-name",onClick:function(){return t.toPhotos(n)},children:n.name})]},n.id)})),this.gridClass="grid albums",this.setState({grid:Object(r.a)(this.grid)})}},{key:"showPhotos",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=[],s="\u0421\u043a\u0440\u044b\u0442\u044c";!0===n?(this.updateHeader("photos",t),i=t.images.filter((function(t){return t.visible}))):(this.updateHeader("hidden photos",t),i=t.images.filter((function(t){return!t.visible})),s="\u0412 \u043e\u0431\u0449\u0438\u0435"),this.grid=i.map((function(i,c){return Object(p.jsxs)("div",{className:"cell",children:[Object(p.jsx)("img",{src:i.thumb,alt:"",onClick:function(){return e.selectPhoto(i)}}),Object(p.jsx)("div",{className:"hide-button",onClick:function(){return e.hidePhoto(t,i,n)},children:s}),Object(p.jsx)("div",{className:"photo-name",children:i.name})]},i.id)})),this.gridClass="grid photos",this.setState({grid:Object(r.a)(this.grid)})}},{key:"hideAlbum",value:function(t,e){t.visible=!e,this.albums.findIndex((function(t){return t.visible===e}))>-1?this.showAlbums(e):this.showAlbums(!e)}},{key:"hidePhoto",value:function(t,e,n){e.visible=!n;for(var i=k,s=t.images.length-1;s>=0;--s)if(console.log(s),t.images[s].visible){i=t.images[s].img;break}t.thumb=i,this.toPhotos(t,n)}},{key:"toPhotos",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.images.findIndex((function(t){return t.visible===e}))>-1?this.showPhotos(t,e):this.showPhotos(t,!e)}},{key:"backToAlbums",value:function(){this.albums.findIndex((function(t){return t.visible}))>-1?this.showAlbums(!0):this.showAlbums(!1)}},{key:"selectPhoto",value:function(t){this.selectedPhoto=t,this.setState({selectedPhoto:t})}},{key:"render",value:function(){return Object(p.jsxs)("div",{className:"App",children:[this.header,Object(p.jsx)("div",{className:this.gridClass,children:this.grid}),Object(p.jsx)(x,{handler:this.handler,photo:this.selectedPhoto})]})}}]),n}(s.a.Component),w=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,22)).then((function(e){var n=e.getCLS,i=e.getFID,s=e.getFCP,c=e.getLCP,a=e.getTTFB;n(t),i(t),s(t),c(t),a(t)}))};a.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(N,{})}),document.getElementById("root")),w()}},[[21,1,2]]]);
//# sourceMappingURL=main.87836a74.chunk.js.map